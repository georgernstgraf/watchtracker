<!-- #userwatches.hbs -->
<div id='userWatches'
     x-data="{ sortBy: localStorage.getItem('wt-sortBy') || 'recent_desc' }"
     x-init="htmx.ajax('GET', '{{appPath}}/watches?sort=' + sortBy, { target: '#watchGrid', swap: 'innerHTML' })">
    <!-- Sort Controls -->
    <div class="d-flex justify-content-between mb-2">
        <button type="button"
                class="btn btn-outline-secondary btn-sm"
                :class="{ 'active': sortBy === 'recent_desc' }"
                @click="sortBy = 'recent_desc'; localStorage.setItem('wt-sortBy', 'recent_desc'); htmx.ajax('GET', '{{appPath}}/watches?sort=recent_desc', { target: '#watchGrid', swap: 'innerHTML' })">
            Recent ↓
        </button>
        <button type="button"
                class="btn btn-outline-secondary btn-sm"
                :class="{ 'active': sortBy === 'recent_asc' }"
                @click="sortBy = 'recent_asc'; localStorage.setItem('wt-sortBy', 'recent_asc'); htmx.ajax('GET', '{{appPath}}/watches?sort=recent_asc', { target: '#watchGrid', swap: 'innerHTML' })">
            Recent ↑
        </button>
        <button type="button"
                class="btn btn-outline-secondary btn-sm"
                :class="{ 'active': sortBy === 'precise_asc' }"
                @click="sortBy = 'precise_asc'; localStorage.setItem('wt-sortBy', 'precise_asc'); htmx.ajax('GET', '{{appPath}}/watches?sort=precise_asc', { target: '#watchGrid', swap: 'innerHTML' })">
            Precise ↑
        </button>
        <button type="button"
                class="btn btn-outline-secondary btn-sm"
                :class="{ 'active': sortBy === 'precise_desc' }"
                @click="sortBy = 'precise_desc'; localStorage.setItem('wt-sortBy', 'precise_desc'); htmx.ajax('GET', '{{appPath}}/watches?sort=precise_desc', { target: '#watchGrid', swap: 'innerHTML' })">
            Precise ↓
        </button>
    </div>
    <!-- Watch Cards Grid -->
    <div id="watchGrid"></div>

    <!-- Add Watch Card Button -->
    <div id="watchCreateBtn"
         class="card h-100 border-secondary border-dashed"
         style="cursor: pointer; min-height: 200px;"
         hx-get="{{appPath}}/watch/new"
         hx-target="#mainContent"
         hx-swap="innerHTML">
        <div class="card-body d-flex flex-column align-items-center justify-content-center text-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" class="text-secondary mb-2" viewBox="0 0 16 16">
                <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
            </svg>
            <span class="text-secondary">Add new Watch</span>
        </div>
    </div>
</div>
<!-- /userwatches.hbs -->
