<!-- #userwatches.hbs -->
<div id='userWatches'
     x-data="{ sortBy: localStorage.getItem('wt-sortBy') || 'recent_desc' }"
     x-init="htmx.ajax('GET', '{{appPath}}/watches?sort=' + sortBy, { target: '#watchGrid', swap: 'innerHTML' })">
    <!-- Sort Controls -->
    <div class="d-flex justify-content-between mb-2">
        <button type="button"
                class="btn btn-outline-secondary btn-sm"
                :class="{ 'active': sortBy === 'recent_desc' }"
                @click="sortBy = 'recent_desc'; localStorage.setItem('wt-sortBy', 'recent_desc'); htmx.ajax('GET', '{{appPath}}/watches?sort=recent_desc', { target: '#watchGrid', swap: 'innerHTML' })">
            Recent â†“
        </button>
        <button type="button"
                class="btn btn-outline-secondary btn-sm"
                :class="{ 'active': sortBy === 'recent_asc' }"
                @click="sortBy = 'recent_asc'; localStorage.setItem('wt-sortBy', 'recent_asc'); htmx.ajax('GET', '{{appPath}}/watches?sort=recent_asc', { target: '#watchGrid', swap: 'innerHTML' })">
            Recent â†‘
        </button>
        <button type="button"
                class="btn btn-outline-secondary btn-sm"
                :class="{ 'active': sortBy === 'precise_asc' }"
                @click="sortBy = 'precise_asc'; localStorage.setItem('wt-sortBy', 'precise_asc'); htmx.ajax('GET', '{{appPath}}/watches?sort=precise_asc', { target: '#watchGrid', swap: 'innerHTML' })">
            Precise â†‘
        </button>
        <button type="button"
                class="btn btn-outline-secondary btn-sm"
                :class="{ 'active': sortBy === 'precise_desc' }"
                @click="sortBy = 'precise_desc'; localStorage.setItem('wt-sortBy', 'precise_desc'); htmx.ajax('GET', '{{appPath}}/watches?sort=precise_desc', { target: '#watchGrid', swap: 'innerHTML' })">
            Precise â†“
        </button>
    </div>
    <!-- Watch Cards Grid -->
    <div id="watchGrid"></div>

    <!-- Add Watch Button -->
    <div class="my-2 d-flex justify-content-around" id="watchCreateBtn">
        <button title="Add a new Watch to track"
                onclick="watchCreateDisplay()"
                class="btn btn-outline-secondary">Add new Watch to track</button>
    </div>

    <!-- Create Watch Form -->
    <div id="watchCreateForm"
         class="my-4 justify-content-center gap-3 align-items-baseline"
         style="display:none">
        <form id="newWatchSave"
              hx-post="{{appPath}}/watch"
              hx-target="#allButHeadAndFoot"
              hx-swap="outerHTML"
              hx-trigger="trigger">
            <input type="text"
                   name="name"
                   value=""
                   placeholder="enter Name" />
            <input type="text"
                   name="comment"
                   value=""
                   placeholder="enter Comment" />
        </form>
        <div class="btn-group">
            <button class="btn btn-outline-secondary"
                    title="Cancel Edit"
                    onclick="watchCreateDisplay(false)">âŒ</button>
            <button title="Save"
                    class="btn btn-outline-secondary"
                    type="button"
                    onclick="htmx.trigger('#newWatchSave', 'trigger')">ğŸ’¾</button>
        </div>
    </div>
</div>
<!-- /userwatches.hbs -->
